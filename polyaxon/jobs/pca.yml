---
version: 1.1
kind: component
tags: 
  - pca
  - metrics
name: pca_test

# more here: https://polyaxon.com/docs/core/specification/io/
inputs:
  - name: data
    type: path
    value: /data/gluster/saucie/PBMC/pbmc_filtered.npy
    isOptional: true
  - name: true_labels
    type: path
    value: /data/gluster/saucie/PBMC/true_labels.npy
    isOptional: true

outputs:
  - name: model
    type: artifacts
    description: PCA model
  - name: reduced_dims
    type: artifacts
    description: PCA dimensionality reduction
  
run:
  kind: job
  container:
    image: quay.io/kiiaed/saucie:build
    workingDir: '{{ globals.artifacts_path }}/repo'
    command:
    - python
    args:
    - -m
    - bin.pca
    - --data
    - "{{ data }}"
    - --true_labels
    - "{{ true_labels }}"
